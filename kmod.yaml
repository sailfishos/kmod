Name: kmod
Summary: Linux kernel module handling
Description: |
  kmod is a set of tools to handle common tasks with Linux kernel modules like
  insert, remove, list, check properties, resolve dependencies and aliases.
Version: 9
Release: 1
Group: Kernel/Linux Kernel
License: GPLv2
URL: http://git.profusion.mobi/cgit.cgi/kmod.git/
Sources:
    - http://www.kernel.org/pub/linux/utils/kernel/kmod/%{name}-%{version}.tar.xz
Files:
    - "%dir %{_sysconfdir}/depmod.d"
    - "%dir %{_sysconfdir}/modprobe.d"
    - "%dir %{_prefix}/lib/modprobe.d"
    - "%{_bindir}/kmod"
    - "/sbin/modprobe"
    - "/sbin/modinfo"
    - "/sbin/insmod"
    - "/sbin/rmmod"
    - "/sbin/lsmod"
    - "/sbin/depmod"
    - "%attr(0644,root,root) %{_mandir}/man5/*.5*"
    - "%attr(0644,root,root) %{_mandir}/man8/*.8*"

Obsoletes:
    - module-init-tools <= 3.15
Provides:
    - module-init-tools > 3.15

PkgConfigBR:
    - zlib
    - liblzma
ConfigOptions:
    - --with-xz
    - --with-zlib

SubPackages:
    - Name: libs
      Summary: Libraries for kmod
      Description: Libraries for kmod.
      Group: Kernel/Linux Kernel
      Files:
        - "%{_libdir}/libkmod.so.*"
      AutoDepend: false
    
    - Name: devel
      Summary: Devel files for libkmod
      Description: Development files for libkmod.
      Group: Kernel/Linux Kernel
      Requires:
        - "%{name}-libs = %{version}-%{release}"
      Files:
        - "%{_includedir}/libkmod.h"
        - "%{_libdir}/pkgconfig/libkmod.pc"
        - "%{_libdir}/libkmod.so"

